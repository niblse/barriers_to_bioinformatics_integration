#README

### NIBLSE 2016 Survey on Bioinformatics in Undergraduate Education
### Analysis of barriers to bioinformatics integration

NIBLSE is supported by NSF Award #1539900

NIBLSE homepage on QUBES hub: [https://qubeshub.org/groups/niblse](https://qubeshub.org/groups/niblse)

## Items in this directory

|Item|Notes|
|----|-----|
|barriers_by_carnegie_classification/|Analyses of barriers by respondent institution's Carnegie classification|
|barriers_by_current_teaching/|Analyses of barriers by respondent's status of teaching bioinformatics|
|barriers_by_ethnicity/|Analyses of barriers by respondent's ethnicity|
|barriers_by_highest_degree_earned/|Analyses of barriers by respondent's highest degree|
|barriers_by_level_of_bioinformatics_training/|Analyses of barriers by respondent's level of bioinformatics training|
|barriers_by_msi/|Analyses of barriers by respondent institution's status as minority-serving|
|barriers_by_sex/|Analyses of barriers by respondent's sex|
|barriers_by_undergraduate_enrollment/|Analyses of barriers by undergraduate enrollment at respondent's institution|
|summarize_and_plot_demographic_information/|Overall plotting of respondents in various demographic categories|
|mca_plots/|Outputs of multiple correspondence analyses generated by `mca-plot.R`|
|mca-plot.R|Script for multiple correspondence analysis|
|top5_plots/|Outputs of summary plots generated by `top_barriers_plots.R`|
|top_barriers_plots.R|Analysis of reported barriers for multiple scored free-text questions|
|templates/|Template scripts for analyses of 4 survey question types|

## Additional notes

### Script details

These analyses involve 7 scripts:

*Special analyses* 

- `mca-plot.R`: Multiple correspondence analysis of several survey responses
- `Top5_barriers.plots.R`: Side-by-side plotting of several question responses
- `summarize_and_plot_demographic_information/response_summary_plots.R`: Plots and tables summarizing the number of respondents in several demographic categories

*Analysis templates (templates/)*

Analyses are conducted on the following question, numbered as named

|Survey Question #|Question Text |Notes/Question aims|Template Script|
|-----------------|--------------|-------------------|---------------|
|Q06|“Optional: Please describe briefly; include any barriers to development and/or implementation.”|Barriers to implementation|`templates/question_06_template_barriers_to_implementation.R`|
|Q29-30|29: "At your current institution, do you face any technical barriers in teaching bioinformatics, e.g., availability of a computer lab, different operating systems, access to high performance computing for teaching, IT support?"<br> <br>30:"Optional: Please describe."|Technical barriers to implementation|`templates/question_29-30_template_technical_challenges.R`|
|Q33|"In your opinion, what do you think are the most important challenges currently facing those educating undergraduate life scientists in bioinformatics?"|Educator challenges|`templates/question_33_template_educator_challenges.R`|
|Q38|"What is preventing you from including bioinformatics content in these courses?"|Barriers to inclusion|`templates/question_38_template_barriers_to_inclusion.R`|

*Running analysis template scripts*

Each of the template scripts have sections that are custom for that question (i.e. which variables/columns from the survey data). In addition to run the script from a template the following items are customized:

1. The variable for the demographic to be analyzed needs to be selected long with custom names for outputs:
    
     ```R
    # set the variable (Question) that will be analyzed:"COLUMN_NAME"
category.column.name <- ""

    # set a 'nice' (e.g. human readable) name to describe this category: "Category (Q#)"
category.column.name.nice <- ""

    # set a 'safe name' for naming variables: "Q#_category_category"
category.column.name.safe <- ""

    # set a 'short' for naming filename variables: "Q#_category_category"
category.column.name.short <- ""

    #set a nice name in upper and lower case that describes the category kinds 
#(e.g. gender, institution type): ""

    category.nice.name.caps <- ""
category.nice.name.lower <- ""
```
2. A `category.levels` variable is set to indicate which of the responses to a demographic will be analyzed. For example, if there are 3 levels (e.g '1_Female', '2_Male', '3_NA') selecting the range category.levels[1:2] will eliminate NA values from the analysis:
    ```R
    #Set levels to retain ( excluding for example responses such as 'Don't Know     or 'NA')
# select the range of values within category.levels to use (e.g. category.levels[1:4])
category.levels <- category.levels[1:4]
```
3. Create a data frame that will contain nicely formatted names:
```R 
    category.df <- data.frame ("Associates"= category.levels[1], 
                           "Baccalaureate" = category.levels[2] , 
                           "Masters" = category.levels[3] , 
                           "Doctoral" = category.levels[4], 
                        stringsAsFactors = FALSE)
```

### Output details

**Tabular Outputs**

|Naming*|Notes|Columns/Variables|
|-------|-----|-----------------|
|count_of_responses_to_%%%.csv|Indicates the number of respondents in each of n demographic categories|<ul><li>`(Col1)`: Row names of variables used in script<li>`(Col2-n)`: 1 or more demographic bins. The 'response_count' row contains the number of survey respondents calculated </ul>|
|sig_diff_%%%_by_~~~.csv||<ul><li>`(Col1)`:numbered rows <li>`Var2`: bins of coded free-text responses <li>`prop_test_chi_pvalue`: p-values from proportion test (chi-squared) of coded free-text responses as reported by different demographic categories </ul>|
|sum_table_%%%_by_~~~.csv|In this table, data has been reshaped for plotting. For n demographic bins in `Var1`, data are grouped and repeated for each of the coded free-text responses in `Var2`|<ul><li>`Var1`: Demographic categories analyzed <li>`Var2`: bins of coded free-text responses <li>`value`: The number of respondents in a demographic category who indicated an issue/barrier in one of the coded free-text bins in `Var2` <li>`summed_score`: sum of all responses as grouped by the coded free-text bins in `Var2` <li>`percentage`: Given the number in `value` this is the percentage of respondents in demographic bins of `Var1` reporting a barrier in `Var2` <li>`responses`: The total number of survey respondents in the demographic bin of `Var1` <li>`proportion`: the total percentage of respondents in `value` and a percentage of total responses in `responses` <li>`nice_names`:human-readable names for the demographic categories in `Var` <li>`positive_scored_response`: value of `value` <li>`null_scored_response`: number of respondents not reporting a barrier in `Var2`; `responses` - `positive_scored_response` <li>`prop_test_chi_pvalue`:p-values from proportion test (chi-squared) of coded free-text responses as reported by different demographic categories as grouped by demographic categories in `Var1` <li>`proportion_error`: Interval estimate of population proportion margin of error at 95% confidence interval<li>`ymax`: Error bar ymax <li>`ymin`: Error bar ymin</ul>|
|tally_of_raw_score_of_%%%_by_~~~.csv|In this table, data has been reshaped for plotting. For n demographic bins in `Var1`, data are grouped and repeated for each of the coded free-text responses in `Var2`|<ul><li>`Var1`: Demographic categories analyzed <li>`Var2`: bins of coded free-text responses <li>`value`: The number of respondents in a demographic category who indicated an issue/barrier in one of the coded free-text bins in `Var2` <li>`summed_score`: sum of all responses as grouped by the coded free-text bins in `Var2` <li>`percentage`: Given the number in `value` this is the percentage of respondents in demographic bins of `Var1` reporting a barrier in `Var2` <li>`responses`: The total number of survey respondents in the demographic bin of `Var1` <li>`proportion`: the total percentage of respondents in `value` and a percentage of total responses in `responses` <li>`nice_names`:human-readable names for the demographic categories in `Var` </ul>|
|tally_raw_of_%%%_by_~~~.csv||<ul><li>`(Col1)`: row names indicated bins of coded free-text responses <li>`(Col2-n)`: 1 or more columns of demographic bins with the number of respondents indicating a barrier in that demographic </ul>|
|tally_reduced_of_%%%_by_~~~.csv||<ul><li>`(Col1)`: row names indicated bins of reduced (summarized super-categories) of coded  responses <li>`(Col2-n)`: 1 or more columns of demographic bins with the number of respondents indicating a barrier in that demographic </ul>|
|Q29_y_n_response_percentages_by_~~~.csv||<ul><li>`(Col1)`:numbered rows <li>`category_key`: Demographic bins<li>`variable`: Indicated a 'Yes' or 'No' response to this question<li>`value`: Percentage of respondents indicating the response in `variable` <li>`response_count`: Total number of 'Yes' and 'No' responses<li>`Yes_percentage`: Percentage of 'Yes' responses<li>`No_percentage` Percentage of 'No' responses:<li>`response_stratafying_cat`: Total number of respondents in the demographic indicated in `category_key`<li>`percentage_of_n`: Total number of respondents in `response_count` as a percentage of total survey respondents for all demographic categories in `category_key`<li>`proportion_error`:Interval estimate of population proportion margin of error at 95% confidence interval<li>`ymax_y`:ymax error bar for 'Yes' responses<li>`ymin_y`: ymin error bar for 'Yes' response<li>`ymax_n`: ymax error bar for 'No' responses<li>`ymin_n`:ymin error bar for 'No' responses<li>`chi_values`:p-values from proportion test (chi-squared) of coded free-text responses as reported by different demographic categories as grouped by demographic categories in `category_key` </ul>|

Naming - Output names start with an identification of the survey question the template is derived from (%%%) and the demographic question (~~~) survey respondents are drawn from. 


**Plots**


|Plot*|Notes|
|-----|-----|
|count_of_respondents_%%%_by_~~~.png|Bar chart displaying numerical counts of survey responstant identifying in a specific demographic category|
|Q%Q~-~~~.png (mca plots)| Plot of a multiple correspondence analysis|
|reduced_category_barplot_%%%_by_~~~.png|Bar chart showing percentage of respondents in a demographic who had an issue scored in a one of the super-categories (reduced) barrier bins|
|reduced_category_correlation_%%%_by_~~~.png|Correlation plot showing correlation between super-categories (reduced) barrier bins|
|reduced_barriers_Q33_Q38.png|Faceted plot of responses to Q33, Q38 showing percentage of respondents across all demographics who had an issue scored in a one of the super-categories (reduced) barrier bins |
|scored_barriers_Q33_Q38.png|Faceted plot of responses to Q33, Q38 showing percentage of respondents across all demographics who had an issue scored in a one of the coded free-text barrier bins|
|barriers_differing_signifigantly_by_category_proprotional_by_category_%%%_by_~~~.png|Bar chart shows significantly different (between demographic categories) percentages of people reporting barriers. Significance is shown by proportion test (chi-squared values), error bars are Interval estimate of population proportion margin of error at 95% confidence interval. Each barrier shows the number of 'positive' responses - responses where any barrier was reported. No significance tests were run when any barrier had less than 5 responses|
|tally_of_raw_coded_barriers_all_categories_%%%_by_~~~.png|Count of all responses to barriers in coded free-text responses across an entire demographic category|
|Q29_yes.no_responses_by_~~~.png|Plots of proportional responses to Q29 across a demographic. Significance is shown for each demographic, proportion test (chi-squared values). Error bars are Interval estimate of population proportion margin of error at 95% confidence interval|
|top_5_reported_barriers_proprotional_by_cat_%%%_by_~~~.png|Bar plot showing top 5 reported barriers as percentage of respondents across a demographic|


### R Session Info


All scripts run in R under in the following environment


```R
R version 3.3.0 (2016-05-03)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.12.3 (unknown)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] corrplot_0.77   gplots_3.0.1    pwr_1.2-0       reshape2_1.4.2  dplyr_0.5.0     purrr_0.2.2     readr_1.0.0     tidyr_0.6.1     tibble_1.2     
[10] tidyverse_1.1.1 ggplot2_2.2.0  

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.9        plyr_1.8.4         bitops_1.0-6       forcats_0.2.0      tools_3.3.0        jsonlite_1.2       lubridate_1.6.0    nlme_3.1-127      
 [9] gtable_0.2.0       lattice_0.20-33    psych_1.6.12       DBI_0.5-1          parallel_3.3.0     haven_1.0.0        stringr_1.1.0      httr_1.2.1        
[17] xml2_1.1.1         caTools_1.17.1     gtools_3.5.0       hms_0.3            grid_3.3.0         R6_2.2.0           readxl_0.1.1       foreign_0.8-66    
[25] gdata_2.17.0       modelr_0.1.0       magrittr_1.5       scales_0.4.1       assertthat_0.1     mnormt_1.5-5       rvest_0.3.2        colorspace_1.3-2  
[33] KernSmooth_2.23-15 stringi_1.1.2      lazyeval_0.2.0     munsell_0.4.3      broom_0.4.1
```

#### Tips

To run all the scripts in the barriers analysis directories from the bash command line:
```bash
$ for dir in ./barriers_by_*/; do cd $dir; for script in *.R; do Rscript $script;done ; cd -;done
```














